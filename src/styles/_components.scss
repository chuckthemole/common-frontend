@use "variables" as *;
@use "components/dashboard-elements/control-button";
@use "components/dashboard-elements/number-stepper";
@use "components/dashboard-elements/toggle-switch";
@use "mixins" as *;

// Bulma with overrides
@use "bulma/bulma" with ($family-primary: var(--primary-font),
    $family-secondary: var(--secondary-font));


// Button Variants
@include button-variant("primary", var(--button-background-color, #3273dc));
@include button-variant("secondary", var(--secondary-color, #7a7a7a));
@include button-variant("info", var(--info-color, #209cee));
@include button-variant("success", var(--success-color, #23d160));
@include button-variant("warning", var(--warning-color, #ffdd57));
@include button-variant("danger", var(--danger-color, #ff3860));
@include button-variant("link", var(--link-color, #485fc7));

// Navbar
.navbar {
    height: 4rem;
    display: flex;
    align-items: stretch;
    background-color: var(--navbar-background-color, var(--missing-debug-var));
    color: var(--navbar-text-color, var(--missing-debug-var));

    // Brand section
    .navbar-brand {
        display: flex;
        align-items: stretch;
        height: 100%;

        .navbar-item {
            display: flex;
            align-items: stretch;
            padding: 0;
            height: 100%;

            img {
                height: 100%;
                width: auto;
                object-fit: contain;
                display: block;
            }
        }

        .navbar-burger-wrapper {
            display: flex;
            align-items: center;
            flex: 0 0 auto;
            margin-left: auto;
        }

        .navbar-burger {
            align-self: center;
            flex-shrink: 0;
        }
    }

    // ----------------------------
    // Navbar items (layout)
    // ----------------------------
    .navbar-item {
        display: flex;
        align-items: center;
        padding: 0.5rem 1rem;
        height: 100%;
    }

    // Links (hoverable)
    .navbar-item-link {
        @extend .navbar-item;
        color: var(--navbar-text-color, var(--missing-debug-var));
        text-decoration: none;

        &:hover {
            background-color: var(--hover-color, var(--missing-debug-var)) !important;
            color: var(--button-text-color, var(--missing-debug-var)) !important;
        }
    }

    // Dropdowns
    .navbar-item-dropdown {
        @extend .navbar-item;
        position: relative;

        // Title link
        >.navbar-link {
            color: var(--navbar-text-color, var(--missing-debug-var));
            background-color: transparent;
            text-decoration: none;
            transition: background-color 0.2s, color 0.2s;

            // Hover/focus on the title itself
            &:hover,
            &:focus,
            &:focus-visible {
                background-color: var(--hover-color, var(--missing-debug-var)) !important;
                color: var(--button-text-color, var(--missing-debug-var)) !important;
            }
        }

        // Maintain hover color when any child inside dropdown is hovered/focused
        &:hover>.navbar-link,
        &:focus-within>.navbar-link {
            background-color: var(--hover-color, var(--missing-debug-var)) !important;
            color: var(--button-text-color, var(--missing-debug-var)) !important;
        }

        .navbar-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 12rem;
            background-color: var(--navbar-background-color, var(--missing-debug-var));
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
            z-index: 1000;

            .navbar-item-link {
                display: block;
                padding: 0.5rem 1rem;
                color: var(--navbar-text-color, var(--missing-debug-var));
                text-decoration: none;

                &:hover,
                &:focus,
                &:focus-visible {
                    background-color: var(--hover-color, var(--missing-debug-var)) !important;
                    color: var(--button-text-color, var(--missing-debug-var)) !important;
                }
            }
        }
    }
}

.sticky-header {
    position: sticky;
    top: 0;
    z-index: 1000;
    transition: transform 0.3s ease;
}

.sticky-header.hidden {
    transform: translateY(-80%);
}

// Footer
.footer {
    background-color: var(--footer-background-color, var(--missing-debug-var));
    color: var(--footer-text-color, var(--missing-debug-var));
}

// Sidebar
.sidebar {
    background-color: var(--sidebar-background-color, var(--missing-debug-var));
    color: var(--sidebar-text-color, var(--missing-debug-var));
}

// Cards
.card {
    background-color: var(--card-background-color, var(--missing-debug-var));
    color: var(--card-text-color, var(--missing-debug-var));

    .card-header {
        background-color: var(--card-header-background-color, var(--missing-debug-var));
    }
}

// Tabs
.tabs.is-boxed {
    li a {
        color: var(--muted-color);
        font-weight: 600;
        transition: all 0.2s;
    }

    li.is-active a {
        background-color: var(--card-header-background-color);
        color: var(--card-text-color);
        border-radius: 4px 4px 0 0;
    }

    li a:hover {
        color: var(--primary-color);
    }
}

// --------------------
// Spinner
// --------------------
.rumpus-spinner {
    border: 4px solid #f3f3f3; // default fallback
    border-radius: 50%;
    border-top: 4px solid var(--primary-color, #00d1b2); // reactive to theme
    width: 40px;
    height: 40px;
    animation: spin 0.8s linear infinite;
    margin: auto;
    box-sizing: border-box;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

// Brand
@keyframes logoColorShift {
    0% {
        filter: brightness(0.4) invert(1) sepia(1) saturate(5) hue-rotate(200deg);
    }

    50% {
        filter: brightness(1.5) invert(1) sepia(1) saturate(8) hue-rotate(300deg);
    }

    100% {
        filter: brightness(0.4) invert(1) sepia(1) saturate(5) hue-rotate(200deg);
    }
}

.brand-logo {
    width: 200px; // or responsive sizing
    animation: logoColorShift 4s infinite;
}